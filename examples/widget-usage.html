<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DotPassport SDK - Widget Usage Examples</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      background: #f3f4f6;
    }
    h1 {
      color: #111827;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      color: #6b7280;
      margin-bottom: 2rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    .widget-container {
      background: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .widget-title {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #111827;
    }
    .controls {
      background: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      margin-bottom: 2rem;
    }
    input {
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      width: 100%;
      max-width: 400px;
      margin-right: 0.5rem;
    }
    button {
      padding: 0.5rem 1rem;
      background: #8b5cf6;
      color: white;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
      font-weight: 500;
    }
    button:hover {
      background: #7c3aed;
    }
    .code {
      background: #1f2937;
      color: #f9fafb;
      padding: 1rem;
      border-radius: 0.375rem;
      font-family: monospace;
      font-size: 0.875rem;
      overflow-x: auto;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>DotPassport SDK - Widget Examples</h1>
  <p class="subtitle">Framework-agnostic embeddable widgets for displaying reputation data</p>

  <div class="controls">
    <h3>Configuration</h3>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">API Key:</label>
      <input type="text" id="apiKey" placeholder="your-api-key" value="live_demo_key">
    </div>
    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Polkadot Address:</label>
      <input type="text" id="address" placeholder="5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY" value="5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY">
    </div>
    <button onclick="loadWidgets()">Load Widgets</button>
    <button onclick="switchTheme()">Toggle Dark Mode</button>
  </div>

  <div class="grid">
    <div class="widget-container">
      <div class="widget-title">Reputation Widget (Default)</div>
      <div id="reputation-widget"></div>
      <div class="code">
createWidget({
  apiKey: 'your-key',
  address: 'polkadot-address',
  type: 'reputation'
}).mount('#reputation-widget');
      </div>
    </div>

    <div class="widget-container">
      <div class="widget-title">Badge Widget</div>
      <div id="badge-widget"></div>
      <div class="code">
createWidget({
  apiKey: 'your-key',
  address: 'polkadot-address',
  type: 'badges',
  maxBadges: 3
}).mount('#badge-widget');
      </div>
    </div>

    <div class="widget-container">
      <div class="widget-title">Profile Widget</div>
      <div id="profile-widget"></div>
      <div class="code">
createWidget({
  apiKey: 'your-key',
  address: 'polkadot-address',
  type: 'profile'
}).mount('#profile-widget');
      </div>
    </div>

    <div class="widget-container">
      <div class="widget-title">Category Widget</div>
      <div id="category-widget"></div>
      <div class="code">
createWidget({
  apiKey: 'your-key',
  address: 'polkadot-address',
  type: 'category',
  categoryKey: 'longevity'
}).mount('#category-widget');
      </div>
    </div>
  </div>

  <script type="module">
    // Import from the built SDK (in production, this would be from npm)
    import { createWidget } from '../dist/index.js';

    let currentTheme = 'light';
    let widgets = {};

    window.loadWidgets = function() {
      const apiKey = document.getElementById('apiKey').value;
      const address = document.getElementById('address').value;

      if (!apiKey || !address) {
        alert('Please enter both API key and address');
        return;
      }

      // Destroy existing widgets
      Object.values(widgets).forEach(widget => widget?.destroy());

      // Create reputation widget
      widgets.reputation = createWidget({
        apiKey,
        address,
        type: 'reputation',
        theme: currentTheme,
        showCategories: true,
        maxCategories: 6,
        onError: (error) => console.error('Reputation widget error:', error),
        onLoad: () => console.log('Reputation widget loaded')
      });
      widgets.reputation.mount('#reputation-widget');

      // Create badge widget
      widgets.badge = createWidget({
        apiKey,
        address,
        type: 'badges',
        theme: currentTheme,
        maxBadges: 3,
        showProgress: true,
        onError: (error) => console.error('Badge widget error:', error),
        onLoad: () => console.log('Badge widget loaded')
      });
      widgets.badge.mount('#badge-widget');

      // Create profile widget
      widgets.profile = createWidget({
        apiKey,
        address,
        type: 'profile',
        theme: currentTheme,
        showIdentities: true,
        showSocials: true,
        showBio: true,
        onError: (error) => console.error('Profile widget error:', error),
        onLoad: () => console.log('Profile widget loaded')
      });
      widgets.profile.mount('#profile-widget');

      // Create category widget
      widgets.category = createWidget({
        apiKey,
        address,
        type: 'category',
        categoryKey: 'longevity',
        theme: currentTheme,
        showBreakdown: true,
        showAdvice: true,
        onError: (error) => console.error('Category widget error:', error),
        onLoad: () => console.log('Category widget loaded')
      });
      widgets.category.mount('#category-widget');
    };

    window.switchTheme = function() {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.body.style.background = currentTheme === 'dark' ? '#111827' : '#f3f4f6';
      document.body.style.color = currentTheme === 'dark' ? '#f9fafb' : '#111827';

      // Update all widgets
      Object.values(widgets).forEach(widget => {
        if (widget) {
          widget.update({ theme: currentTheme });
        }
      });
    };

    // Load widgets on page load
    window.addEventListener('DOMContentLoaded', () => {
      loadWidgets();
    });
  </script>
</body>
</html>
